# UBUNTU 24.04 VERSION 1
autoinstall:
  version: 1

  # Configuração de identidade (usuário e hostname)
  identity:
    hostname: "meu-hostname"
    username: "mutley"
    password: "$6$saltsalt$UqP6y0yFYZGJH09Pqv91bGcDQ7p2cxRi8Uz7A0z1yShyX7YFJjBPy6euXh5qgUbqauKIm5oN0xz9e6roFVg8z0"

  # Configurações de localização
  locale: pt_BR.UTF-8

  # Configuração de fuso horário
  timezone: America/Sao_Paulo

  # Pacotes que são instalados com o sistema de pacotes apt
  packages:
    - git
    - wget
    - curl

  # Instalação de codecs e drivers do sistema
  codecs:
    install: true

  drivers:
    install: true

  # Atualizações
  updates: all

  # Script personalizado para instalar o AnyDesk, Google Chrome, VSCode e MDATP
  runcmd:
    # Instalação do Google Chrome
    - wget -O /tmp/google-chrome-stable_current_amd64.deb "https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb"
    - sudo dpkg -i /tmp/google-chrome-stable_current_amd64.deb
    - sudo apt-get install -f -y  # Corrigir dependências, se necessário
    - rm /tmp/google-chrome-stable_current_amd64.deb  # Remover o arquivo .deb após a instalação

    # Instalação do AnyDesk
    - wget -O /tmp/AnyDeskClient.deb "https://ticorpfilestorage.blob.core.windows.net/varoa/Linux/Script%20Onboarding/AnyDeskClient.deb?si=Automate&sv=2022-11-02&sr=b&sig=fOYBnODf%2B%2FsAgK7M5KIZ845ot0frkdjUH%2FqjxB%2BdbMc%3D"
    - sudo dpkg -i /tmp/AnyDeskClient.deb
    - sudo apt-get install -f -y  # Corrigir dependências, se necessário
    - rm /tmp/AnyDeskClient.deb  # Remover o arquivo .deb após a instalação

    # Instalação do VSCode via Pacote .deb (recomendado)
    - wget -O /tmp/vscode.deb "https://code.visualstudio.com/sha/download?build=stable&os=linux-deb-x64"
    - sudo dpkg -i /tmp/vscode.deb
    - sudo apt-get install -f -y  # Corrigir dependências, se necessário
    - rm /tmp/vscode.deb  # Remover o arquivo .deb após a instalação

    # Instalação do Microsoft Defender for Endpoint (mdatp)
    - wget -qO- https://packages.microsoft.com/keys/microsoft.asc | sudo gpg --dearmor -o /usr/share/keyrings/microsoft.gpg --yes >/dev/null 2>&1
    - echo "deb [arch=amd64 signed-by=/usr/share/keyrings/microsoft.gpg] https://packages.microsoft.com/ubuntu/20.04/prod focal main" | sudo tee /etc/apt/sources.list.d/microsoft.list >/dev/null 2>&1
    - sudo apt update -y >/dev/null 2>&1
    - sudo apt install -y mdatp >/dev/null 2>&1
